# ç«èµ›æŠ¥åè¾…åŠ©ç³»ç»Ÿ - åç«¯API

è¿™æ˜¯ä¸€ä¸ªåŸºäºFlaskçš„åç«¯æœåŠ¡ï¼Œæä¾›ç”¨æˆ·æ³¨å†Œå’Œç™»å½•åŠŸèƒ½ï¼Œä½¿ç”¨MySQLæ•°æ®åº“å­˜å‚¨æ•°æ®ã€‚

## ğŸ“‹ å‰ç½®è¦æ±‚

1. **Python 3.8+**
2. **MySQLæ•°æ®åº“** (ç«¯å£: 3305, å¯†ç : syj17771493975)

## ğŸš€ å®‰è£…æ­¥éª¤

### 1. å®‰è£…Pythonä¾èµ–

åœ¨ `backend` ç›®å½•ä¸‹è¿è¡Œï¼š

```bash
pip install -r requirements.txt
```

### 2. é…ç½®æ•°æ®åº“

ç¡®ä¿MySQLæœåŠ¡æ­£åœ¨è¿è¡Œï¼Œé…ç½®ä¿¡æ¯ï¼š
- **ä¸»æœº**: localhost
- **ç«¯å£**: 3305
- **ç”¨æˆ·**: root
- **å¯†ç **: syj17771493975
- **æ•°æ®åº“**: competition_systemï¼ˆä¼šè‡ªåŠ¨åˆ›å»ºï¼‰

### 3. åˆå§‹åŒ–æ•°æ®åº“

è¿è¡Œä»¥ä¸‹å‘½ä»¤åˆ›å»ºæ•°æ®åº“å’Œè¡¨ï¼š

```bash
python database.py
```

è¿™å°†ä¼šï¼š
- åˆ›å»ºåä¸º `competition_system` çš„æ•°æ®åº“
- åˆ›å»º `users` è¡¨ï¼ŒåŒ…å«ä»¥ä¸‹å­—æ®µï¼š
  - idï¼ˆä¸»é”®ï¼‰
  - usernameï¼ˆç”¨æˆ·åï¼‰
  - emailï¼ˆé‚®ç®±ï¼Œå”¯ä¸€ï¼‰
  - passwordï¼ˆåŠ å¯†å¯†ç ï¼‰
  - schoolï¼ˆå­¦æ ¡ï¼‰
  - student_idï¼ˆå­¦å·ï¼‰
  - phoneï¼ˆæ‰‹æœºå·ï¼‰
  - created_atï¼ˆåˆ›å»ºæ—¶é—´ï¼‰
  - updated_atï¼ˆæ›´æ–°æ—¶é—´ï¼‰

## ğŸƒ è¿è¡ŒæœåŠ¡å™¨

```bash
python app.py
```

æœåŠ¡å™¨å°†åœ¨ `http://localhost:5000` å¯åŠ¨

## ğŸ“¡ APIæ¥å£

### 1. æµ‹è¯•æ¥å£

**GET** `/api/test`

æµ‹è¯•APIæ˜¯å¦æ­£å¸¸è¿è¡Œ

**å“åº”ç¤ºä¾‹ï¼š**
```json
{
  "success": true,
  "message": "APIæœåŠ¡æ­£å¸¸è¿è¡Œ"
}
```

### 2. ç”¨æˆ·æ³¨å†Œ

**POST** `/api/register`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "username": "å¼ ä¸‰",
  "email": "zhangsan@example.com",
  "password": "123456",
  "school": "æ¸…åå¤§å­¦",
  "studentId": "2021001",
  "phone": "13800138000"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "æ³¨å†ŒæˆåŠŸ",
  "data": {
    "userId": 1,
    "username": "å¼ ä¸‰",
    "email": "zhangsan@example.com"
  }
}
```

**å¤±è´¥å“åº”ï¼š**
```json
{
  "success": false,
  "message": "è¯¥é‚®ç®±å·²è¢«æ³¨å†Œ"
}
```

### 3. ç”¨æˆ·ç™»å½•

**POST** `/api/login`

**è¯·æ±‚ä½“ï¼š**
```json
{
  "email": "zhangsan@example.com",
  "password": "123456"
}
```

**æˆåŠŸå“åº”ï¼š**
```json
{
  "success": true,
  "message": "ç™»å½•æˆåŠŸ",
  "data": {
    "userId": 1,
    "username": "å¼ ä¸‰",
    "email": "zhangsan@example.com",
    "school": "æ¸…åå¤§å­¦",
    "studentId": "2021001",
    "phone": "13800138000"
  }
}
```

**å¤±è´¥å“åº”ï¼š**
```json
{
  "success": false,
  "message": "é‚®ç®±æˆ–å¯†ç é”™è¯¯"
}
```

## ğŸ”’ å®‰å…¨ç‰¹æ€§

- **å¯†ç åŠ å¯†**ï¼šä½¿ç”¨ bcrypt è¿›è¡Œå¯†ç å“ˆå¸ŒåŠ å¯†
- **CORSæ”¯æŒ**ï¼šå…è®¸å‰ç«¯è·¨åŸŸè¯·æ±‚
- **SQLæ³¨å…¥é˜²æŠ¤**ï¼šä½¿ç”¨å‚æ•°åŒ–æŸ¥è¯¢
- **é‚®ç®±å”¯ä¸€æ€§**ï¼šæ•°æ®åº“å±‚é¢ä¿è¯é‚®ç®±ä¸é‡å¤

## ğŸ“ é¡¹ç›®ç»“æ„

```
backend/
â”œâ”€â”€ app.py              # Flaskåº”ç”¨ä¸»æ–‡ä»¶
â”œâ”€â”€ database.py         # æ•°æ®åº“è¿æ¥å’Œåˆå§‹åŒ–
â”œâ”€â”€ requirements.txt    # Pythonä¾èµ–
â””â”€â”€ README.md          # è¯´æ˜æ–‡æ¡£
```

## ğŸ› å¸¸è§é—®é¢˜

### 1. æ•°æ®åº“è¿æ¥å¤±è´¥

ç¡®ä¿ï¼š
- MySQLæœåŠ¡æ­£åœ¨è¿è¡Œ
- ç«¯å£3305å¯è®¿é—®
- ç”¨æˆ·åå’Œå¯†ç æ­£ç¡®

### 2. æ¨¡å—å¯¼å…¥é”™è¯¯

ç¡®ä¿å·²å®‰è£…æ‰€æœ‰ä¾èµ–ï¼š
```bash
pip install -r requirements.txt
```

### 3. ç«¯å£è¢«å ç”¨

å¦‚æœ5000ç«¯å£è¢«å ç”¨ï¼Œå¯ä»¥åœ¨ `app.py` ä¸­ä¿®æ”¹ç«¯å£å·ï¼š
```python
app.run(host='0.0.0.0', port=5001, debug=True)
```

## ğŸ“ æ³¨æ„äº‹é¡¹

- ç”Ÿäº§ç¯å¢ƒä¸­åº”è¯¥å°†æ•°æ®åº“å¯†ç ç­‰æ•æ„Ÿä¿¡æ¯æ”¾åœ¨ç¯å¢ƒå˜é‡ä¸­
- å»ºè®®æ·»åŠ JWTæˆ–Sessionæ¥ç®¡ç†ç”¨æˆ·ç™»å½•çŠ¶æ€
- å¯ä»¥æ·»åŠ æ›´å¤šçš„è¾“å…¥éªŒè¯å’Œé”™è¯¯å¤„ç†
